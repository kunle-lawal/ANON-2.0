(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{258:function(e,t,a){e.exports=a(500)},418:function(e,t,a){},500:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(254),o=a.n(i),c=a(16),l=a(17),s=a(19),u=a(18),m=a(20),d=a(35),h=a(47),p=function(){return r.a.createElement("div",{className:"write-container"},r.a.createElement("div",{className:"write"},r.a.createElement(d.c,{to:"/create"},r.a.createElement("h3",null,"My Story"))))},g=a(7),f=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).signInAnonymous=function(e){a.props.signIn()},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.props.auth.uid?null:r.a.createElement("div",{className:"write-container"},r.a.createElement("div",{className:"write"},r.a.createElement("h3",{onClick:this.signInAnonymous},"Sign In")))}}]),t}(n.Component),b=Object(g.b)(null,function(e){return{signIn:function(){return e(function(e,t,a){var n=a.getFirebase;a.getFirestore,n().auth().signInAnonymously().then(function(){e({type:"LOGIN_SUCCESS"})}).catch(function(t){e({type:"LOGIN_ERROR"})})})}}})(f),E=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).signOutAnonymous=function(e){a.props.signOut()},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"write-container"},r.a.createElement("div",{className:"write"},r.a.createElement("h3",{onClick:this.signOutAnonymous},"Sign Out")))}}]),t}(n.Component),v=(Object(g.b)(null,function(e){return{signOut:function(){return e(function(e,t,a){var n=(0,a.getFirebase)();console.log("Signing Out"),n.auth().signOut().then(function(){e({type:"LOGOUT_SUCCESS"})}).catch(function(t){e({type:"LOGOUT_ERROR"})})})}}})(E),Object(g.b)(function(e){return{auth:e.firebase.auth,nav:e.nav}},function(e){return{toggleMobileNav:function(){return e(function(e,t){e({type:"MOBILE_NAV_TOGGLED"})})},resetView:function(){return e(function(e,t){e({type:"MOBILE_NAV_RESET"})})}}})(function(e){var t=e.auth,a=e.nav;console.log(t.uid),console.log(e);var n=a.mobileToggled?"mobile_nav":"mobile_nav-noDisplay";return r.a.createElement("nav",{className:"top_section"},r.a.createElement("div",{className:"logo",onClick:e.resetView},r.a.createElement(d.b,{to:"/",className:"left"},r.a.createElement("h1",null,"ANON"))),r.a.createElement("div",{className:"nav_items"},r.a.createElement(p,null),r.a.createElement(b,{auth:t})),r.a.createElement("div",{className:"mobile_nav_button",onClick:e.toggleMobileNav},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)),r.a.createElement("div",{className:n,onClick:e.toggleMobileNav},r.a.createElement(b,{auth:t}),r.a.createElement(p,null)))}));var y=function(e){var t=e.time;return r.a.createElement("h4",null,function(e){if(e.length>5)return e;var t=(((new Date).getTime()-e)/1e3/60).toFixed(0);return e=t/60>=24?(t/60/24).toFixed(0)+" days ago":t>=60?(t/60).toFixed(0)+" Hours ago":t+" Minutes ago"}(t))},O=a(14),N=function(e,t,a,n,r){return e.firestore.collection("users").doc(t).set(Object(O.a)({},a,{reactions:Object(O.a)({},n,{liked:!r})}),{merge:!0}),r},j=function(e,t,a,n){var r=e.firebase;e.firestore.collection("stories").doc(t).set({reactions:Object(O.a)({},a,{total:r.firestore.FieldValue.increment(n)})},{merge:!0})},k=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={thumb:{highlighted:!1,className:""},laugh:{highlighted:!1,className:""},shook:{highlighted:!1,className:""}},a.toggleReaction=function(e){if(a.props.auth.uid){var t=!a.state[e.target.id].highlighted,n=t?" highlighted":"";console.log(t),a.setState(Object(O.a)({},e.target.id,{highlighted:t,className:n}))}},a.setHighlight=function(e){var t=(a.props.profile[a.props.reactions.id]?a.props.profile[a.props.reactions.id].reactions[e]:void 0)?a.props.profile[a.props.reactions.id].reactions[e].liked:void 0,n=t?" highlighted":"";a.setState(Object(O.a)({},e,{highlighted:t,className:n}))},a.updateLikes=function(e){if(a.props.auth.uid){var t=a.props.reactions.id,n=a.props.reactions.story.reactions[e.target.id].total,r={id:t,type:[e.target.id],val:n,userData:{reactions:a.props.profile}};a.props.updateReaction(r)}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.auth;console.log(e),e.uid&&(this.setHighlight("thumb"),this.setHighlight("laugh"),this.setHighlight("shook"))}},{key:"render",value:function(){var e=this,t=this.props.reactions.story.reactions;return r.a.createElement("div",{className:"reaction noselect"},r.a.createElement("i",{id:"thumb",className:"fas fa-thumbs-up"+this.state.thumb.className,onClick:function(t){e.updateLikes(t),e.toggleReaction(t)}}," ",r.a.createElement("span",{id:"thumb"},t.thumb.total)),r.a.createElement("i",{id:"laugh",className:"fas fa-grin-squint-tears"+this.state.laugh.className,onClick:function(t){e.updateLikes(t),e.toggleReaction(t)}},r.a.createElement("span",{id:"laugh"},t.laugh.total)),r.a.createElement("i",{id:"shook",className:"fas fa-surprise"+this.state.shook.className,onClick:function(t){e.updateLikes(t),e.toggleReaction(t)}},r.a.createElement("span",{id:"shook"},t.shook.total)))}}]),t}(n.Component),w=Object(g.b)(function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}},function(e){return{updateReaction:function(t){return e(function(e){return function(t,a,n){var r,i=n.getFirebase,o=n.getFirestore,c=i(),l=o(),s=c.auth().currentUser,u=e.type[0],m=!!(e.userData.reactions[e.id]?e.userData.reactions[e.id].reactions[u]:void 0)&&e.userData.reactions[e.id].reactions[u].liked;e.id,r=N({firestore:l,firebase:c},s.uid,e.id,u,m)?-1:1,j({firebase:c,firestore:l},e.id,u,r)}}(t))}}})(k),_=function(e){var t=e.story,a={story:t,id:e.story.id};return r.a.createElement("div",{className:"article"},r.a.createElement(d.b,{to:"/story/"+t.id},r.a.createElement("div",{className:"article-info"},r.a.createElement("div",{className:"article-info-title"},r.a.createElement("h2",null,t.title)),r.a.createElement("div",{className:"article-info-description"},r.a.createElement("p",null,t.content)))),r.a.createElement("div",{className:"article-date"},r.a.createElement("div",{className:"date"},r.a.createElement(y,{time:t.createdAt})),r.a.createElement(w,{reactions:a})),r.a.createElement("div",{className:"drag"},r.a.createElement("div",null)))},S=function(e){var t=e.stories;return r.a.createElement("div",{className:"main_body"},t&&t.map(function(e){return r.a.createElement(_,{story:e,key:e.id})}))},R=a(31),A=a(22),C=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.stories;return e.nav.mobileToggled?null:r.a.createElement("div",{id:"main_body_container",className:"main_body_container"},r.a.createElement(S,{stories:t}))}}]),t}(n.Component),T=Object(A.d)(Object(g.b)(function(e){return{stories:e.firestore.ordered.stories,nav:e.nav}}),Object(R.firestoreConnect)([{collection:"stories",limit:6,orderBy:["time","desc"]}]))(C);var L=Object(A.d)(Object(g.b)(function(e,t){var a=t.match.params.id,n=e.firestore.data.stories;return{story:n?n[a]:null}}),Object(R.firestoreConnect)([{collection:"stories"}]))(function(e){var t=e.story,a={story:t,id:e.match.params.id};return t?r.a.createElement("div",{className:"main_body_container"},r.a.createElement("div",{className:"main_body"},r.a.createElement("div",{className:"article"},r.a.createElement("div",{className:"article-info"},r.a.createElement("div",{className:"article-info-title"},r.a.createElement("h2",null,t.title)),r.a.createElement("div",{className:"article-info-description"},r.a.createElement("p",null,t.content))),r.a.createElement("div",{className:"article-date"},r.a.createElement("div",{className:"date"},r.a.createElement(y,{time:t.createdAt})),r.a.createElement(w,{reactions:a})),r.a.createElement("div",{className:"drag"},r.a.createElement("div",null))))):r.a.createElement("div",{className:"container center"},r.a.createElement("h1",null,"Loading Story..."))}),D=a(56),I=function(e){for(var t in e)if(null===e[t]||""===e[t])return!0;return!1},F=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",content:""},a.handleChange=function(e){a.setState(Object(O.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.createStory(a.state)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.storyError;return console.log(this.props),r.a.createElement("div",{className:"write_container container"},r.a.createElement("form",{className:"write",onSubmit:this.handleSubmit},r.a.createElement("h3",{className:"dark-text test-darken-3"},"Tell us your story. Its Anonymous"),r.a.createElement("h4",null,"A safe place where you cna post whatever tf you want with no reprecussions. Lol"),r.a.createElement("div",{className:"input-fields"},r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"text",id:"title",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"title"},"Title")),r.a.createElement("div",{className:"input-field textarea-field"},r.a.createElement("textarea",{id:"content",className:"materialize-textarea",spellcheck:"true",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"content"},"My Story")),r.a.createElement("div",{className:"input-field button-input"},r.a.createElement("button",{className:"btn-large lighten-1"},"Create"),r.a.createElement("div",{className:"red-text error-message center"},r.a.createElement("p",null,e))))))}}]),t}(n.Component),x=Object(g.b)(function(e){return{storyError:e.stories.error}},function(e){return{createStory:function(t){return e(function(e){return function(t,a,n){n.getFirebase;var r=n.getFirestore;if(I(e))return t({type:"EMPTY_VALUE"}),0;r().collection("stories").add(Object(D.a)({},e,{authorID:1234,time:new Date,createdAt:(new Date).getTime(),reactions:{laugh:{type:"laugh",total:0,active:!1},shook:{type:"shook",total:0,active:!1},thumb:{type:"thumb",total:0,active:!1}}})).then(function(){t({type:"ADD_STORY",story:e})}).catch(function(e){t({type:"CREATED_STORY_ERROR",err:e})})}}(t))}}})(F),M=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"main_container"},r.a.createElement(d.a,null,r.a.createElement("div",{className:"main"},r.a.createElement(v,null),r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",component:T}),r.a.createElement(h.a,{path:"/story/:id",component:L}),r.a.createElement(h.a,{path:"/create",component:x}))))))}}]),t}(n.Component);a(418),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U={stories:[{id:"1",title:"This is the way to go",content:"blah blah blah"},{id:"2",title:"This is the way to go",content:"blah blah blah"},{id:"3",title:"This is the way to go",content:"blah blah blah"}]},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_STORY":return console.log("project created",t),e;case"CREATED_STORY_ERROR":return console.log(t.err),e;case"EMPTY_VALUE":return Object(D.a)({},e,{error:"Make sure you have a Title and a Story"});default:return e}},V={type:"",id:""},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATED_REACTION":var a=t.reaction.id;return console.log("added"),Object(D.a)({},e,Object(O.a)({},a,{type:t.reaction.type}));default:return e}},Y=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"LOGIN_ERROR":console.log("Login Error");break;case"LOGIN_SUCCESS":console.log("SUCCESSFUL LOGIN");break;case"USER_DELETED":console.log("User deleted")}return 0},H={mobileToggled:!1},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;switch((arguments.length>1?arguments[1]:void 0).type){case"MOBILE_NAV_TOGGLED":return{mobileToggled:!e.mobileToggled};case"MOBILE_NAV_RESET":return{mobileToggled:!1};default:return e}},z=a(77),J=Object(A.c)({nav:P,auth:Y,stories:G,reaction:B,firestore:z.firestoreReducer,firebase:R.firebaseReducer}),Q=a(257),W=a(111),q=a.n(W);a(494),a(498);q.a.initializeApp({apiKey:"AIzaSyBT9xbz88ZJ06unQVQSpmbSOt9hF_TVbaE",authDomain:"anon-71390.firebaseapp.com",databaseURL:"https://anon-71390.firebaseio.com",projectId:"anon-71390",storageBucket:"anon-71390.appspot.com",messagingSenderId:"629190899949"});q.a.firestore();var K=q.a,Z=Object(A.e)(J,Object(A.d)(Object(A.a)(Q.a.withExtraArgument({getFirebase:R.getFirebase,getFirestore:z.getFirestore})),Object(z.reduxFirestore)(K),Object(R.reactReduxFirebase)(K,{useFirestoreForProfile:!0,userProfile:"users",attachAuthIsReady:!0})));Z.firebaseAuthIsReady.then(function(){o.a.render(r.a.createElement(g.a,{store:Z},r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})})}},[[258,1,2]]]);
//# sourceMappingURL=main.5f129e2d.chunk.js.map